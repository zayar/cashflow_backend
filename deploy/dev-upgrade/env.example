# Cloud Run / dev-upgrade environment variables (example)
#
# IMPORTANT:
# - Do not commit real secrets.
# - Prefer Secret Manager for passwords/keys.

# ---- Database (Cloud SQL MySQL) ----
DB_USER=root
DB_PASSWORD=REPLACE_ME   # prefer Secret Manager
# For Cloud Run + Cloud SQL connector use unix socket:
DB_HOST=/cloudsql/cashflow-483906:asia-southeast1:cashflow-mysql-dev-upgrade
DB_PORT=3306
DB_NAME_2=pitibooks

# ---- Redis (Memorystore) ----
REDIS_ADDRESS=10.85.205.115:6379

# ---- API ----
API_PORT_2=8080
TOKEN_HOUR_LIFESPAN=24
GO_ENV=dev-upgrade

# ---- Pub/Sub ----
PUBSUB_PROJECT_ID=cashflow-483906
PUBSUB_TOPIC=CashflowAccountingDevUpgrade
PUBSUB_SUBSCRIPTION=CashflowAccountingDevUpgradeSub

# Optional: provide credentials JSON explicitly (otherwise ADC is used)
# PUBSUB_CREDENTIALS_JSON='{}'

# ---- Outbox Processing ----
# Enable direct outbox processing (without Pub/Sub) for local/dev environments.
# If true, the backend will process accounting outbox records directly.
# If false or unset, it auto-enables when PUBSUB_TOPIC/PUBSUB_SUBSCRIPTION are unset.
OUTBOX_DIRECT_PROCESSING=true

# ---- Storage (GCS) ----
STORAGE_PROVIDER=gcs
GCS_BUCKET=cashflow-dev-upgrade-uploads
# Public access URL base for stored objects. Prefer proxy to keep bucket private.
# Examples:
# - http://localhost:4000/api/uploads/object?key=
# - https://api.example.com/api/uploads/object?key=
STORAGE_ACCESS_BASE_URL=http://localhost:4000/api/uploads/object?key=
# Public GCS URL fallback (used if STORAGE_ACCESS_BASE_URL is not set).
GCS_URL=storage.googleapis.com
# Optional: provide credentials JSON explicitly (otherwise ADC is used)
# GCS_CREDENTIALS_JSON='{}'
# Optional: signer for signed URLs when not using ADC
# GCS_SIGNER_EMAIL=service-account@project.iam.gserviceaccount.com
# GCS_SIGNER_PRIVATE_KEY='-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n'

